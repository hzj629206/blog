<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='介绍 Oracle Cloud 免费对象存储的使用，以及使用 Cloudflare Workers 做 CDN 加速。'><meta name=keywords content="Object Storage,OCI,Oracle Cloud Infrastructure,Self-Hosted,Free Quota,Cloudflare,CDN"><title>Oracle 免费对象存储使用 Cloudflare 做 CDN</title>
<link rel=canonical href=https://ogr.xyz/p/oracle-object-storage/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property='og:title' content='Oracle 免费对象存储使用 Cloudflare 做 CDN'><meta property='og:description' content='介绍 Oracle Cloud 免费对象存储的使用，以及使用 Cloudflare Workers 做 CDN 加速。'><meta property='og:url' content='https://ogr.xyz/p/oracle-object-storage/'><meta property='og:site_name' content='平凡的路'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='OCI'><meta property='article:tag' content='Object Storage'><meta property='article:tag' content='Cloudflare'><meta property='article:tag' content='CDN'><meta property='article:published_time' content='2024-03-15T20:47:04+08:00'><meta property='article:modified_time' content='2024-03-15T20:47:04+08:00'><meta name=twitter:title content="Oracle 免费对象存储使用 Cloudflare 做 CDN"><meta name=twitter:description content="介绍 Oracle Cloud 免费对象存储的使用，以及使用 Cloudflare Workers 做 CDN 加速。"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu54e4477c009483f2a745092446432d68_338159_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>🍥</span></figure><div class=site-meta><h1 class=site-name><a href=/>平凡的路</a></h1><h2 class=site-description>个人博客，欢迎交流</h2></div></header><ol class=social-menu><li><a href=https://github.com/hzj629206 target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>主页</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>关于</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>搜索</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>链接</span></a></li></ol><div class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></div></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#背景>背景</a></li><li><a href=#创建存储桶>创建存储桶</a></li><li><a href=#创建访问密钥>创建访问密钥</a></li><li><a href=#创建预先验证的请求>创建预先验证的请求</a></li><li><a href=#cloudflare-workers>Cloudflare Workers</a><ol><li><a href=#添加二级域名>添加二级域名</a></li><li><a href=#创建-worker>创建 Worker</a></li><li><a href=#将二级域名指向-worker>将二级域名指向 Worker</a></li><li><a href=#开启缓存>开启缓存</a></li></ol></li><li><a href=#使用方法>使用方法</a></li><li><a href=#总结>总结</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/>对象存储</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/oracle-object-storage/>Oracle 免费对象存储使用 Cloudflare 做 CDN</a></h2><h3 class=article-subtitle>介绍 Oracle Cloud 免费对象存储的使用，以及使用 Cloudflare Workers 做 CDN 加速。</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2024-03-15</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 6 分钟</time></div></footer></div></header><section class=article-content><h2 id=背景>背景</h2><p>上篇博文《<a class=link href=https://ogr.xyz/p/garage-setup/>Garage对象存储的安装和使用</a>》介绍了在 Oracle Cloud 的免费实例上用 Garage 搭建 S3 兼容的对象存储服务。</p><p>实际上 Oracle Cloud 的免费套餐里面还有 20GB 的 S3 兼容的对象存储额度。本着不用白不用的精神，来看看怎么利用起来。<br>本博客就是托管于 Cloudflare Pages，图床使用 Oracle 对象存储并使用 Cloudflare Workers 做 CDN 加速。</p><p>相比较用开源项目自行搭建的对象存储服务，云厂商的对象存储服务一般功能更多。OCI Object Storage 的一个优点是可以进行预授权，在存储桶设为私有的情况下，Web 应用程序也可以很方便地通过授权码进行访问。<br>（没有测试过是否支持 S3 兼容的访问策略，如果兼容的话，也可以用访问策略实现允许匿名以只读的形式访问。）</p><h2 id=创建存储桶>创建存储桶</h2><p>进入<a class=link href=https://cloud.oracle.com/object-storage/buckets target=_blank rel=noopener>存储桶</a>管理页面。对于免费套餐用户，可以看到提示有 20GB 的免费存储空间额度。<img src=https://oos.ogr.xyz/e174a208096cb3c1b09fa57a9f67fd6b84318641af539e6cc9469fee52f5a9d0.png loading=lazy alt="picture 0"></p><p>点击<strong>创建存储桶</strong>按钮，输入<strong>存储桶名称</strong>，其它选项用默认即可。我这里的名称为 <code>bucket-oracle-free-20G</code>。<img src=https://oos.ogr.xyz/d00c32aa10da678181f3b927692908b81af9aca3ad83bedd10a5cdcd982e13b8.png loading=lazy alt="picture 1"></p><p>此时该存储桶还不能被访问。注意<strong>可见性</strong>设置，如果设置为<strong>公共</strong>，那么将允许匿名用户和未通过身份验证的用户访问该存储桶中存储的数据，这样是不安全的。建议保持<strong>专用</strong>，下面会介绍通过 Cloudflare 免费 CDN 访问专用存储桶的资源。</p><h2 id=创建访问密钥>创建访问密钥</h2><p>从顶部导航栏的进入<strong>我的概要信息</strong>。<br><img src=https://oos.ogr.xyz/673c4788f1bd29a95f53acef1b21eb6211b26c6af98d87635df0892c9a8da343.png loading=lazy width=50%></p><p>从左边的侧边栏进入<strong>客户密钥</strong>。<br><img src=https://oos.ogr.xyz/2a07ce17687bccbff8b55a5e0bc54445f315bdb592a62a3fd3d823d9d21e44ca.png loading=lazy width=50%></p><p>点击<strong>生成密钥</strong>并输入密钥名称，将生成密钥 (<code>Secret key</code>)，这个只有在创建时能展示明文，需要另外保存下来。<br><img src=https://oos.ogr.xyz/97e021df71930de8eac8c88e23e1e63b4a820bca5ba6da61339d1fd5cb8bcbbb.png loading=lazy width=50%></p><p>回到密钥列表，可以看到创建的密钥，其中<strong>访问密钥</strong>是 <code>Key ID</code>，可以复制明文。</p><p>至此可以使用各种 S3 兼容的客户端和库访问存储桶了。需要注意的点：</p><ol><li><code>region</code> 是当前区域，一般在网址里面会有类似于 <code>region=ap-tokyo-1</code> 的参数。</li><li><code>bucket</code> 并不是上面创建存储桶时指定的名称，而是存储桶详情页面的<strong>名称空间</strong>。</li><li><code>endpoint</code> 参考 <a class=link href=https://docs.oracle.com/en-us/iaas/Content/Object/Concepts/dedicatedendpoints.htm target=_blank rel=noopener>OCI Object Storage Dedicated Endpoints</a>，需要在域名后加上存储桶名称。示例：<code>https://compat.objectstorage.ap-tokyo-1.oraclecloud.com/bucket-oracle-free-20G</code>。</li><li>S3 客户端得到的 URL 为 <code>https://&lt;namespace>.compat.objectstorage.ap-tokyo-1.oraclecloud.com/bucket-oracle-free-20G/&lt;key></code>。</li></ol><h2 id=创建预先验证的请求>创建预先验证的请求</h2><p>上面已经能用 <code>Key ID</code> 和 <code>Secret key</code> 访问存储桶对象了。对通过 Web 应用访问存储桶的场景有更简单的方法，那就是创建<strong>预先验证的请求</strong>。预先验证的请求允许访问存储桶对象而不需要提供访问密钥，本质上就是预先生成访问授权码。在使用 Cloudflare Workers 实现 CDN 时会比较方便。</p><p>进入存储桶详情页面，从左边的侧边栏进入<strong>预先验证的请求</strong>。<img src=https://oos.ogr.xyz/9b12daf3c96c5a542d642e689e3cceb6e1fcb02ac5419f0a38245a607315b47c.png loading=lazy width=50%></p><p>点击创建预先验证的请求。因为是用于 Cloudflare Workers，我这里起名为 <code>Cloudflare-Workers</code>。目标选择<strong>存储桶</strong>，类型选择<strong>允许对象读取</strong>，到期时间可以指定一个非常久远的时间以近似实现永不过期。<img src=https://oos.ogr.xyz/47130c42b6172097fb100f7c18d88438414f08bd301de34c3ea1f29212893f0d.png loading=lazy alt="picture 6"><br>之后会生成一个预先验证的请求 URL，授权码就包含在 URL 里面，这个 URL 只有在创建时能展示明文，需要另外保存下来。</p><h2 id=cloudflare-workers>Cloudflare Workers</h2><p>Cloudflare 为普通用户提供免费 CDN 服务，非常良心。<br>基本上要使用 Cloudflare 服务，需要在 Cloudflare 托管域名。如何购买和托管域名参见网上其它文章。本博客所使用的域名 <code>ogr.xyz</code> 就托管于 Cloudflare。</p><p>常规的 CDN 模式是：<code>用户 -> Cloudflare 服务器 -> Source 服务器</code>。这种方式只需要在 Cloudflare 托管域名，使用 CNAME 并开启代理（小云朵）即可。
然而对于 Oracle 对象存储，无论可见性是公共还是专用，都无法实现代理。这是因为 Oracle 对象存储的域名里面包含存储桶的 <code>bucket</code> 和 <code>region</code> 信息，Cloudflare 访问源服务器时并不会使用源服务器域名，而是使用 Cloudflare 托管的域名，这样一来 Oracle 服务器就不能正常处理请求了。（企业版订阅用户可以通过规则重写 <code>Host</code> HTTP Header。Cloudflare 解释说普通用户不允许是出于安全考虑。）<br>那就只能使用 Cloudflare Workers + Cache 实现 CDN 效果了。</p><h3 id=添加二级域名>添加二级域名</h3><p>进入到域名管理页面，Home -> Websites -> ogr.xyz -> DNS -> Records。</p><p>添加二级域名，类型为 <code>CNAME</code>，名字为 <code>oss</code>，目标为 <code>&lt;namespace>.compat.objectstorage.&lt;region>.oraclecloud.com</code>，默认开启代理。之后 <code>oss.ogr.xyz</code> 的流量会接入到 Cloudflare。<br>注意：这里的目标没有实际作用，后续会把流量指向 Worker。</p><h3 id=创建-worker>创建 Worker</h3><p>进入到 Worker 创建页面，Home -> Workers & Pages。</p><p>点击 Create application -> Create Worker，输入 Worker 名字，我这里用跟域名相同的名字 <code>oss</code>。</p><p>进入到创建的 Worker 管理页面，点击 Edit Code 进入在线编辑器，用以下代码替换。需要修改 <code>OOS_BUCKET_PREAUTH_URL</code> 为你为存储桶创建的<strong>预先验证的请求 URL</strong>。为防止上传文件时未指定 <code>Content-Type</code>，这段代码使用文件扩展名进行映射。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>FileMimeType</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/x-mpeg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mpega&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/3gpp&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;3gpp&#39;</span><span class=p>,</span> <span class=s1>&#39;3gp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/postscript&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ps&#39;</span><span class=p>,</span> <span class=s1>&#39;eps&#39;</span><span class=p>,</span> <span class=s1>&#39;ai&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/x-aiff&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;aiff&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-aim&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;aim&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-jg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;art&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-ms-asf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;asx&#39;</span><span class=p>,</span> <span class=s1>&#39;asf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/basic&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ulw&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-msvideo&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;avi&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-rad-screenplay&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;avx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-bcpio&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;bcpio&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/bmp&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;dib&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/html&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;html&#39;</span><span class=p>,</span> <span class=s1>&#39;htm&#39;</span><span class=p>,</span> <span class=s1>&#39;shtml&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-cdf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;cdf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/pkix-cert&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;cer&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/java&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;class&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-cpio&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;cpio&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-csh&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;csh&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/css&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;css&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/msword&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;doc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/xml-dtd&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;dtd&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-dv&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;dv&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-dvi&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;dvi&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.ms-fontobject&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;eot&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/x-setext&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;etx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/gif&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;gif&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-gtar&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;gtar&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-gzip&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;gz&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-hdf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;hdf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/mac-binhex40&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;hqx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/x-component&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;htc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/ief&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ief&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/vnd.sun.j2me.app-descriptor&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;jad&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/java-archive&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;jar&#39;</span><span class=p>,</span> <span class=s1>&#39;war&#39;</span><span class=p>,</span> <span class=s1>&#39;ear&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/x-java-source&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;java&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-java-jnlp-file&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;jnlp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/jpeg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;jpg&#39;</span><span class=p>,</span> <span class=s1>&#39;jpeg&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/javascript&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;js&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/plain&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;txt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/json&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;json&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/midi&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;midi&#39;</span><span class=p>,</span> <span class=s1>&#39;mid&#39;</span><span class=p>,</span> <span class=s1>&#39;kar&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-latex&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;latex&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/x-mpegurl&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;m3u&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-macpaint&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pnt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/troff&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tr&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/mathml+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mathml&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-mif&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mif&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/quicktime&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;qt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-sgi-movie&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;movie&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/mpeg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mpa&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/mp4&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mp4&#39;</span><span class=p>,</span> <span class=s1>&#39;m4v&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/mpeg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mpg&#39;</span><span class=p>,</span> <span class=s1>&#39;mpeg&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/mpeg2&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;mpv2&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-wais-source&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;src&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-netcdf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;nc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/oda&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;oda&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.database&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odb&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.chart&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.formula&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.graphics&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odg&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.image&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odi&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.text-master&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.presentation&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.spreadsheet&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ods&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.text&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;odt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.graphics-template&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;otg&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.text-web&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;oth&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.presentation-template&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;otp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.spreadsheet-template&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ots&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.oasis.opendocument.text-template&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ott&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/ogg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ogx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/ogg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ogv&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/ogg&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;spx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-font-opentype&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;otf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/flac&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;flac&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/annodex&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;anx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/annodex&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;axa&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/annodex&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;axv&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/xspf+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xspf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-portable-bitmap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pbm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/pict&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pict&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/pdf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pdf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-portable-graymap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pgm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/x-scpls&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pls&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/png&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;png&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-portable-anymap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pnm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-portable-pixmap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ppm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.ms-powerpoint&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;pps&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/vnd.adobe.photoshop&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;psd&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-quicktime&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;qtif&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-cmu-raster&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ras&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/rdf+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rdf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-rgb&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rgb&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.rn-realmedia&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/rtf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rtf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/richtext&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;rtx&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/font-sfnt&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sfnt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-sh&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sh&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-shar&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;shar&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-stuffit&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sit&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-sv4cpio&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sv4cpio&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-sv4crc&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;sv4crc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/svg+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;svgz&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-shockwave-flash&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;swf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-tar&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tar&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-tcl&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tcl&#39;</span><span class=p>,</span> <span class=s1>&#39;tk&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-tex&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tex&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-texinfo&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;texinfo&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/tiff&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tiff&#39;</span><span class=p>,</span> <span class=s1>&#39;tif&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/tab-separated-values&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;tsv&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-font-ttf&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ttf&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-ustar&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;ustar&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/voicexml+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;vxml&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-xbitmap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xbm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/xhtml+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xhtml&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.ms-excel&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xls&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xsl&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-xpixmap&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xpm&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/xslt+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xslt&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.mozilla.xul+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xul&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/x-xwindowdump&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;xwd&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.visio&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;vsd&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;audio/x-wav&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wav&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;image/vnd.wap.wbmp&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wbmp&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/vnd.wap.wml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wml&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.wap.wmlc&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wmlc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;text/vnd.wap.wmlsc&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wmls&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/vnd.wap.wmlscriptc&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wmlscriptc&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;video/x-ms-wmv&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wmv&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/font-woff&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;woff&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/font-woff2&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;woff2&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;model/vrml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wrl&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/wspolicy+xml&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;wspolicy&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/x-compress&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;z&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;application/zip&#39;</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;zip&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fileMimeType</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>k</span> <span class=k>in</span> <span class=nx>FileMimeType</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>FileMimeType</span><span class=p>[</span><span class=nx>k</span><span class=p>].</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>ext</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>fileMimeType</span><span class=p>[</span><span class=nx>ext</span><span class=p>]</span> <span class=o>=</span> <span class=nx>k</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 预先验证的请求 URL
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>OOS_BUCKET_PREAUTH_URL</span> <span class=o>=</span> <span class=s1>&#39;&lt;你创建的预先验证的请求 URL&gt;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>preAuthURL</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>OOS_BUCKET_PREAUTH_URL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>async</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>request</span><span class=p>,</span> <span class=nx>env</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>host</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>host</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span><span class=p>.</span><span class=nx>host</span> <span class=o>=</span> <span class=nx>preAuthURL</span><span class=p>.</span><span class=nx>host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>url</span><span class=p>.</span><span class=nx>pathname</span> <span class=o>=</span> <span class=nx>preAuthURL</span><span class=p>.</span><span class=nx>pathname</span> <span class=o>+</span> <span class=nx>url</span><span class=p>.</span><span class=nx>pathname</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newRequest</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Request</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>request</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>newRequest</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;X-Forwarded-Host&#39;</span><span class=p>,</span> <span class=nx>host</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>newRequest</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span> <span class=o>!=</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>response</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>contentType</span> <span class=o>=</span> <span class=nx>response</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>contentType</span> <span class=o>&amp;&amp;</span> <span class=nx>contentType</span> <span class=o>!=</span> <span class=s1>&#39;application/octet-stream&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>response</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>newResponse</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Response</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>headers</span><span class=o>:</span> <span class=nx>response</span><span class=p>.</span><span class=nx>headers</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>status</span><span class=o>:</span> <span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>statusText</span><span class=o>:</span> <span class=nx>response</span><span class=p>.</span><span class=nx>statusText</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>ext</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>pathname</span><span class=p>.</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>).</span><span class=nx>pop</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>contentType</span> <span class=o>=</span> <span class=nx>fileMimeType</span><span class=p>[</span><span class=nx>ext</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>contentType</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>newResponse</span><span class=p>.</span><span class=nx>headers</span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Content-Type&#39;</span><span class=p>,</span> <span class=nx>contentType</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>newResponse</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=将二级域名指向-worker>将二级域名指向 Worker</h3><p>进入到创建的 Worker 管理页面，Settings -> Add route。
<img src=https://oos.ogr.xyz/7a97b2030fda600be4d16074a3c043e90c280a3cf77329fc4565e72c56cfd810.png loading=lazy alt="picture 7"><br>Route 填 <code>oos.ogr.xyz/*</code>，Zone 选 <code>ogr.xyz</code>。这样就把 <code>oos.ogr.xyz</code> 的所有请求路由到当前 Worker。</p><h3 id=开启缓存>开启缓存</h3><p>进入到规则管理页面，Home -> Websites -> ogr.xyz -> Rules -> Page Rules。</p><p>点击 Create Page Rule。<br><img src=https://oos.ogr.xyz/5f84565929ce6826c74e818302ad93ed2354a2e3ccdd19ca73553eb87d17653b.png loading=lazy alt="picture 8"><br>URL 填 <code>oos.ogr.xyz/*</code>, Pick a Setting 选 <code>Cache Level</code>，Select Cache Level 选 <code>Cache Everything</code>。这样所有 <code>oos.ogr.xyz</code> 请求的响应都会被缓存，就达到 CDN 的效果了。</p><h2 id=使用方法>使用方法</h2><p>至此，所有的准备工作就完成了，对于上传至存储桶的文件，可以通过 <code>https://oos.ogr.xyz/&lt;key></code> 访问到了。</p><p>对于使用 VS Code 写 Markdown 的用户，推荐 <code>Markdown Image</code> 插件。该插件以粘贴的形式自动上传至云服务并生成可访问链接。详情可参见<a class=link href=https://github.com/imlinhanchao/vsc-markdown-image target=_blank rel=noopener>插件说明</a>。</p><p>Markdown Image 插件实际使用配置如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.base.uploadMethod&#34;</span><span class=err>:</span> <span class=s2>&#34;S3&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.endpoint&#34;</span><span class=err>:</span> <span class=s2>&#34;https://compat.objectstorage.ap-tokyo-1.oraclecloud.com/bucket-oracle-free-20G&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.region&#34;</span><span class=err>:</span> <span class=s2>&#34;ap-tokyo-1&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.bucketName&#34;</span><span class=err>:</span> <span class=s2>&#34;&lt;名称空间&gt;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.accessKeyId&#34;</span><span class=err>:</span> <span class=s2>&#34;&lt;Key ID&gt;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.secretAccessKey&#34;</span><span class=err>:</span> <span class=s2>&#34;&lt;Secret key&gt;&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.cdn&#34;</span><span class=err>:</span> <span class=s2>&#34;https://oos.ogr.xyz/${filepath}&#34;</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;markdown-image.s3.config&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;forcePathStyle&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=总结>总结</h2><p>对象存储一般要搭配 CDN 一起使用。为了免费使用 Cloudflare CDN，上述步骤略显复杂。<br>其实如果已经在使用 Cloudflare Pages 托管博客了，那不妨直接使用 Cloudflare R2 对象存储：有 10G 的免费存储额度，配置简单，自带 CDN 支持，个人博客用户基本够用。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/oci/>OCI</a>
<a href=/tags/object-storage/>Object Storage</a>
<a href=/tags/cloudflare/>Cloudflare</a>
<a href=/tags/cdn/>CDN</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/garage-setup/><div class=article-details><h2 class=article-title>Garage对象存储的安装和使用</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=hzj629206/blog data-repo-id=R_kgDOLddzNw data-category=General data-category-id=DIC_kwDOLddzN84Cd0UC data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 ogr.xyz</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.23.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>